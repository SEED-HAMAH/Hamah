<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freelancer Profile</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            background-color: #f7f9fa;
        }
        .profile-card {
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            box-shadow: 0 0 0 2px #e5e7eb;
        }
        .skill-badge {
            border-radius: 50rem;
        }
        .portfolio-card {
            border-radius: 15px;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            cursor: pointer;
        }
        .portfolio-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
    </style>
</head>
<body class="d-flex justify-content-center align-items-center min-vh-100 p-4">

    <!-- Profile Page Container -->
    <div class="container-fluid max-w-4xl bg-white p-6 p-md-5 my-4 profile-card">
        <!-- Header Section -->
        <div class="d-flex flex-column flex-md-row align-items-center align-items-md-start mb-4">
            <div class="text-center text-md-start me-md-4 mb-4 mb-md-0">
                <img id="profile-image" class="avatar" src="https://placehold.co/120x120/4f46e5/ffffff?text=U" alt="Profile Picture">
                <p id="user-id-display" class="mt-3 text-muted" title="Your unique user ID">User ID: N/A</p>
            </div>
            
            <div class="flex-grow-1 text-center text-md-start">
                <h1 id="profile-name" class="fs-2 fw-bold text-gray-800">Your Name</h1>
                <p id="profile-title" class="fs-5 text-primary fw-medium">Your Title</p>
                <div class="d-flex justify-content-center justify-content-md-start mt-3 gap-2">
                    <button id="edit-button" class="btn btn-primary fw-medium">
                        <i class="fas fa-edit me-2"></i>Edit Profile
                    </button>
                    <button id="save-button" class="btn btn-success fw-medium d-none">
                        <i class="fas fa-save me-2"></i>Save
                    </button>
                    <button id="cancel-button" class="btn btn-secondary fw-medium d-none">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                    <button id="logout-button" class="btn btn-danger fw-medium">
                        <i class="fas fa-sign-out-alt me-2"></i>Logout
                    </button>
                </div>
            </div>
        </div>

        <!-- About Me Section -->
        <hr class="my-4">
        <div>
            <h2 class="fs-4 fw-semibold mb-3">About Me</h2>
            <p id="profile-bio-display" class="text-secondary"></p>
            <textarea id="profile-bio-input" class="form-control d-none" rows="4"></textarea>
        </div>

        <!-- Skills Section -->
        <hr class="my-4">
        <div>
            <h2 class="fs-4 fw-semibold mb-3">Skills</h2>
            <div id="skills-list" class="d-flex flex-wrap gap-2">
                <!-- Skills will be populated here -->
            </div>
            <div id="skills-input-group" class="d-none mt-2">
                <input type="text" id="skill-input" class="form-control" placeholder="Add a skill and press Enter">
            </div>
        </div>

        <!-- Portfolio Section -->
        <hr class="my-4">
        <div>
            <h2 class="fs-4 fw-semibold mb-4">Portfolio</h2>
            <div class="row g-4">
                <!-- HTML Project -->
                <div class="col-12 col-sm-6 col-lg-4">
                    <div class="card h-100 portfolio-card">
                        <img src="https://placehold.co/600x400/E44D26/ffffff?text=HTML" class="card-img-top" alt="HTML Project Icon">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Responsive HTML Structure</h5>
                            <p class="card-text text-muted">Crafting the semantic and structural foundation of web applications to ensure accessibility and fluid responsiveness across all devices.</p>
                            <a href="#" class="btn btn-sm btn-outline-primary mt-2">View Project &rarr;</a>
                        </div>
                    </div>
                </div>

                <!-- CSS Project -->
                <div class="col-12 col-sm-6 col-lg-4">
                    <div class="card h-100 portfolio-card">
                        <img src="https://placehold.co/600x400/1572B6/ffffff?text=CSS" class="card-img-top" alt="CSS Project Icon">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Modern CSS Styling</h5>
                            <p class="card-text text-muted">Utilizing modern CSS techniques and Bootstrap to create visually appealing, clean, and interactive user interfaces.</p>
                            <a href="#" class="btn btn-sm btn-outline-primary mt-2">View Project &rarr;</a>
                        </div>
                    </div>
                </div>

                <!-- JavaScript Project -->
                <div class="col-12 col-sm-6 col-lg-4">
                    <div class="card h-100 portfolio-card">
                        <img src="https://placehold.co/600x400/F7DF1E/000000?text=JS" class="card-img-top" alt="JavaScript Project Icon">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Interactive JavaScript Logic</h5>
                            <p class="card-text text-muted">Implementing dynamic and interactive features with JavaScript to enhance user experience and handle client-side logic.</p>
                            <a href="#" class="btn btn-sm btn-outline-primary mt-2">View Project &rarr;</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="messageModalLabel"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalMessage"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const profileNameDisplay = document.getElementById('profile-name');
        const profileTitleDisplay = document.getElementById('profile-title');
        const profileBioDisplay = document.getElementById('profile-bio-display');
        const profileBioInput = document.getElementById('profile-bio-input');
        const skillsList = document.getElementById('skills-list');
        const skillInput = document.getElementById('skill-input');
        const skillsInputGroup = document.getElementById('skills-input-group');
        const editButton = document.getElementById('edit-button');
        const saveButton = document.getElementById('save-button');
        const cancelButton = document.getElementById('cancel-button');
        const logoutButton = document.getElementById('logout-button');
        
        let isEditing = false;
        let originalProfileData = {};

        // Modal instance
        const messageModal = new bootstrap.Modal(document.getElementById('messageModal'));
        const modalTitle = document.getElementById('messageModalLabel');
        const modalMessage = document.getElementById('modalMessage');

        function showMessage(title, message) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            messageModal.show();
        }
        
        // Use a dummy user ID for localStorage
        const userId = 'local-user-id';
        document.getElementById('user-id-display').textContent = `User ID: ${userId}`;

        // Load profile data from localStorage on page load
        function loadProfile() {
            const storedData = localStorage.getItem('freelancerProfileData');
            if (storedData) {
                originalProfileData = JSON.parse(storedData);
            } else {
                originalProfileData = {
                    name: "Your Name",
                    title: "Your Title",
                    bio: "Introduce yourself to clients. Talk about your skills, experience, and what you're passionate about. A good bio helps you stand out.",
                    skills: ["Web Design", "Mobile App Development", "UI/UX", "Project Management"]
                };
            }
            displayProfileData(originalProfileData);
        }

        // Display data on the page
        function displayProfileData(data) {
            profileNameDisplay.textContent = data.name || "Your Name";
            profileTitleDisplay.textContent = data.title || "Your Title";
            profileBioDisplay.textContent = data.bio || "Write a brief bio about yourself.";
            profileBioInput.value = data.bio || "";
            displaySkills(data.skills);
        }

        // Display skills as badges
        function displaySkills(skills) {
            skillsList.innerHTML = '';
            (skills || []).forEach(skill => {
                const badge = document.createElement('span');
                badge.className = 'badge bg-secondary skill-badge me-2';
                badge.textContent = skill;
                skillsList.appendChild(badge);
            });
        }

        // Toggle edit mode
        function toggleEditMode(enable) {
            isEditing = enable;
            profileBioDisplay.classList.toggle('d-none', enable);
            profileBioInput.classList.toggle('d-none', !enable);
            editButton.classList.toggle('d-none', enable);
            saveButton.classList.toggle('d-none', !enable);
            cancelButton.classList.toggle('d-none', !enable);
            skillsInputGroup.classList.toggle('d-none', !enable);
            
            profileNameDisplay.contentEditable = enable;
            profileTitleDisplay.contentEditable = enable;
            profileNameDisplay.focus();

            // Toggle skills display vs. editing
            skillsList.innerHTML = '';
            if (isEditing) {
                (originalProfileData.skills || []).forEach(skill => {
                    const badge = document.createElement('span');
                    badge.className = 'badge bg-secondary skill-badge me-2 mb-1 d-flex align-items-center gap-1';
                    badge.innerHTML = `${skill} <i class="fas fa-times-circle text-danger cursor-pointer"></i>`;
                    badge.querySelector('i').addEventListener('click', () => removeSkill(skill));
                    skillsList.appendChild(badge);
                });
            } else {
                displaySkills(originalProfileData.skills);
            }
        }

        // Add a skill
        function addSkill(event) {
            if (event.key === 'Enter' && isEditing) {
                const newSkill = skillInput.value.trim();
                if (newSkill) {
                    originalProfileData.skills = originalProfileData.skills || [];
                    if (!originalProfileData.skills.includes(newSkill)) {
                        originalProfileData.skills.push(newSkill);
                        toggleEditMode(true);
                    }
                    skillInput.value = '';
                }
            }
        }
        
        // Remove a skill
        function removeSkill(skillToRemove) {
            originalProfileData.skills = (originalProfileData.skills || []).filter(skill => skill !== skillToRemove);
            toggleEditMode(true);
        }

        // Save data to localStorage
        function saveProfile() {
            const newProfileData = {
                name: profileNameDisplay.textContent,
                title: profileTitleDisplay.textContent,
                bio: profileBioInput.value,
                skills: originalProfileData.skills || []
            };

            try {
                localStorage.setItem('freelancerProfileData', JSON.stringify(newProfileData));
                originalProfileData = newProfileData;
                toggleEditMode(false);
                showMessage("Success", "Profile updated successfully!");
            } catch (error) {
                console.error("Error saving profile:", error);
                showMessage("Save Error", "Failed to save your profile. Please check the console for details.");
            }
        }

        // Event listeners
        editButton.addEventListener('click', () => toggleEditMode(true));
        saveButton.addEventListener('click', saveProfile);
        cancelButton.addEventListener('click', () => {
            displayProfileData(originalProfileData);
            toggleEditMode(false);
        });

        logoutButton.addEventListener('click', () => {
            // In a real app, you would clear the user session here
            window.location.href = 'index.html';
        });

        skillInput.addEventListener('keydown', addSkill);

        // Initial load
        window.onload = loadProfile;
    </script>
</body>
</html>
